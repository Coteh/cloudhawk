# <img src="src/assets/cloudhawk-logo.png" alt="CloudHawk logo" style="width: 80px"></img> cloudhawk

[![Run Tests](https://github.com/Coteh/wordle-clone/actions/workflows/test.yml/badge.svg)](https://github.com/Coteh/wordle-clone/actions/workflows/test.yml)

<span style="font-size: 36px; font-weight: bold;">Very early stages and unstable. Use at your own risk!</span>

![CloudHawk image generated by Stable Diffusion](/src/assets/cloudhawk.png 'Image generated by Stable Diffusion')

> Stable Diffusion: _A clip art image of a hawk flying over a cloud. Cartoon, clip art, simple design, logo_

This is an alternative frontend for CloudWatch. Frontend at this time is written in React/JavaScript, bootstrapped with creat-react-app, and the backend is written in Go.

![Screenshot](/screenshots/screenshot.gif 'Screenshot')

Currently the focus is on CloudWatch Insights queries, but I may consider adding other use cases in the future such as viewing log streams.

If there's a use case that isn't supported yet, please let me know by creating an issue.

## Setup

First, create an `.env` file using `.env.example` as the base, or simply define these environment variables: (using your own values)

```
# https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-envvars.html
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=AKIAIOSFODNN7EXAMPLE
AWS_SECRET_ACCESS_KEY=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
```

### Run without Docker

```sh
npm install --production

go mod download

npm run build

go run main.go
```

### Run with Docker

```sh
./scripts/build-docker-image.sh

docker run --env-file .env -p 8080:8080 cloudhawk
```

## Development

```sh
npm install

go mod download

go run main.go

npm start
```

## Features

-   Query logs using CloudWatch Insights
-   Query results are cached to local storage
-   Perform multiple queries and switch between them
-   Filter columns in query results

## Sequence Diagram

NOTE: Certain parts are not implemented yet, namely the persistent store and log streaming.

```mermaid
sequenceDiagram
    participant Web App
    participant Server
    participant CloudWatch
    participant Persistent Store


    Web App->>Server: Send query
    Server->>Persistent Store: Store query information
    Server->>CloudWatch: Execute query
    CloudWatch->>Server: Return query execution info
    Server->>Persistent Store: Store query execution info in query information
    Server->>Web App: Return query execution information
    Web App->>Server: Retrieve logs from query exeuction
    Server->>CloudWatch: Request logs from query execution result
    CloudWatch->>Server: Stream logs
    Server->>Web App: Stream logs
```

## Roadmap

A few ideas that I want to tackle:

-   Easier way to select multiple log groups
-   Ability to download logs to file
-   Generate a shareable link to the query on CloudWatch web console
-   Ability to change region on per-query basis
-   Ability to switch profiles on per-query basis
-   Adding GitHub issues and a project for all the items I want to do in the future
-   Please post a GitHub issue if there's something you want
